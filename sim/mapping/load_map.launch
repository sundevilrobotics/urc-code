<launch>

    <arg name="map_file" default="$(find mapping)/maps/mdrs_costmap.yaml"/>

    <!-- Run the map server -->
    <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />

    <!-- Place map frame at odometry frame -->
    <node pkg="tf" type="static_transform_publisher" name="map_odom_broadcaster"
        args="0 0 0 0 0 0 map odom 100"/>

    <!-- Run amcl -->
    <!--arg name="scan_topic" default="scan"/-->
    <arg name="initial_pose_x" default="0.0"/>
    <arg name="initial_pose_y" default="0.0"/>
    <arg name="initial_pose_z" default="0.0"/>

    <!--node name="amcl" pkg="amcl" type="amcl">
        <remap from="scan" to="mybot/laser/scan"/>
        <param name="odom_frame_id" value="odom"/>
        <param name="odom_model_type" value="diff-corrected"/>
        <param name="base_frame_id" value="chassis"/>
        <param name="update_min_d" value="0.5"/>
        <param name="update_min_a" value="1.0"/>
    </node-->

<node pkg="fake_localization" type="fake_localization" name="fake_localization" clear_params="true" output="screen">
     <remap from="base_pose_ground_truth" to="odom" />
     <param name="global_frame_id" value="map" />
     <param name="base_frame_id" value="base_footprint" />
  </node>

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen" clear_params="true">
	    <rosparam file="$(find mapping)/maps/costmap_common_params.yaml" command="load" ns="global_costmap" />
	    <rosparam file="$(find mapping)/maps/costmap_common_params.yaml" command="load" ns="local_costmap" />
	    <rosparam file="$(find mapping)/maps/local_costmap_params.yaml" command="load" />
	    <rosparam file="$(find mapping)/maps/global_costmap_params.yaml" command="load" />
	    <rosparam file="$(find mapping)/maps/base_local_planner_params.yaml" command="load" />
	    
    </node>

    <!-- Run rviz -->
    <node type="rviz" name="rviz" pkg="rviz" args="-d $(find mapping)/rviz/map_config.rviz" />

</launch>
